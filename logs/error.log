{"level":"error","message":"Error verifying payment: The \"key\" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined","metadata":{"code":"ERR_INVALID_ARG_TYPE","service":"chatbot-service","stack":"TypeError [ERR_INVALID_ARG_TYPE]: The \"key\" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined\n    at prepareSecretKey (node:internal/crypto/keys:596:11)\n    at new Hmac (node:internal/crypto/hash:141:9)\n    at Object.createHmac (node:crypto:171:10)\n    at verifyPayment (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:67:14)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at authMiddleware (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\middleware\\auth.middleware.js:34:7)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:47:12)"},"timestamp":"2025-06-05T04:05:04.277Z"}
{"level":"error","message":"Error verifying payment: The \"key\" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined","metadata":{"code":"ERR_INVALID_ARG_TYPE","service":"chatbot-service","stack":"TypeError [ERR_INVALID_ARG_TYPE]: The \"key\" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined\n    at prepareSecretKey (node:internal/crypto/keys:596:11)\n    at new Hmac (node:internal/crypto/hash:141:9)\n    at Object.createHmac (node:crypto:171:10)\n    at verifyPayment (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:67:14)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at authMiddleware (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\middleware\\auth.middleware.js:34:7)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\router\\index.js:47:12)"},"timestamp":"2025-06-05T04:10:21.149Z"}
{"level":"error","message":"Error creating order: insert or update on table \"Payments\" violates foreign key constraint \"Payments_userId_fkey\"","metadata":{"fields":null,"index":"Payments_userId_fkey","name":"SequelizeForeignKeyConstraintError","original":{"code":"23503","constraint":"Payments_userId_fkey","detail":"Key (userId)=(0608e8bb-931d-4180-b3b6-603a9115974b) is not present in table \"Users\".","file":"ri_triggers.c","length":286,"line":"2619","name":"error","parameters":["85f83c6c-6e0d-4604-8f7b-1888b903547a","0608e8bb-931d-4180-b3b6-603a9115974b","c95d9055-a151-4394-961b-55690ddd0247","order_QdNumJxdfWR5kk","created",9999,"INR","monthly","{}","2025-06-05 04:35:36.111 +00:00","2025-06-05 04:35:36.111 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","table":"Payments"},"parameters":["85f83c6c-6e0d-4604-8f7b-1888b903547a","0608e8bb-931d-4180-b3b6-603a9115974b","c95d9055-a151-4394-961b-55690ddd0247","order_QdNumJxdfWR5kk","created",9999,"INR","monthly","{}","2025-06-05 04:35:36.111 +00:00","2025-06-05 04:35:36.111 +00:00"],"parent":{"code":"23503","constraint":"Payments_userId_fkey","detail":"Key (userId)=(0608e8bb-931d-4180-b3b6-603a9115974b) is not present in table \"Users\".","file":"ri_triggers.c","length":286,"line":"2619","name":"error","parameters":["85f83c6c-6e0d-4604-8f7b-1888b903547a","0608e8bb-931d-4180-b3b6-603a9115974b","c95d9055-a151-4394-961b-55690ddd0247","order_QdNumJxdfWR5kk","created",9999,"INR","monthly","{}","2025-06-05 04:35:36.111 +00:00","2025-06-05 04:35:36.111 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","table":"Payments"},"service":"chatbot-service","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","stack":"Error\n    at Query.run (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\postgres\\query.js:50:25)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.insert (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Payment.create (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async createOrder (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:54:25)","table":"Payments"},"timestamp":"2025-06-05T04:35:36.166Z"}
{"level":"error","message":"Error in uploadAndEmbedFiles","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T04:44:53.894Z"}
{"level":"error","message":"Error in getEmbeddingStatus","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T04:45:44.969Z"}
{"level":"error","message":"Error in uploadAndEmbedFiles","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T04:53:55.127Z"}
{"level":"error","message":"Error in uploadAndEmbedFiles","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T04:56:12.749Z"}
{"level":"error","message":"Error in uploadAndEmbedFiles","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T04:59:14.364Z"}
{"level":"error","message":"Error in uploadAndEmbedFiles","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T05:01:50.914Z"}
{"level":"error","message":"Failed to load index","metadata":{"clientId":"057a03e2-7617-454c-bda9-83d3058b69fa/client_39f94f3d-9466-47bd-a28b-339c48fea9d5/embeddings","error":{"code":"ENOENT","errno":-4058,"path":"C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\temp\\057a03e2-7617-454c-bda9-83d3058b69fa\\client_39f94f3d-9466-47bd-a28b-339c48fea9d5\\embeddings_latest.index","syscall":"open"},"service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:38:15.094Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"s3BucketLocation":"057a03e2-7617-454c-bda9-83d3058b69fa/client_39f94f3d-9466-47bd-a28b-339c48fea9d5/embeddings","service":"chatbot-service"},"timestamp":"2025-06-05T05:38:15.097Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"clientId":"client_39f94f3d-9466-47bd-a28b-339c48fea9d5","error":{"isOperational":true,"status":"error","statusCode":500},"service":"chatbot-service","userId":"057a03e2-7617-454c-bda9-83d3058b69fa"},"timestamp":"2025-06-05T05:38:15.099Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"fail","statusCode":400},"service":"chatbot-service"},"timestamp":"2025-06-05T05:38:44.177Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"$fault":"client","$metadata":{"attempts":1,"extendedRequestId":"/LtacgLNTpP9pK/1qcXTuEO9Z6Sb99RQyPm1gls/OudQdIPGPh+cQkwMvl+6L6DZBr8batypgZ8=","httpStatusCode":404,"requestId":"V40FZGHCFDV9ZB63","totalRetryDelay":0},"Code":"NoSuchKey","HostId":"/LtacgLNTpP9pK/1qcXTuEO9Z6Sb99RQyPm1gls/OudQdIPGPh+cQkwMvl+6L6DZBr8batypgZ8=","Key":"indices/bkt_e8407a3d-90fa-450b-b546-c413fdf98cff/latest.index","RequestId":"V40FZGHCFDV9ZB63","message":"The specified key does not exist.","name":"NoSuchKey"},"s3BucketLocation":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:41:30.147Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"s3BucketLocation":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:41:30.152Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:41:30.154Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"$fault":"client","$metadata":{"attempts":1,"extendedRequestId":"LAojZYQvS1H1xX+uibvbSK0ElAqayiwDo6xhvIPlD05EyDr8cs7PvI/IHxLr72CcZBW4ieAo2O212QSRqAJUxlQjmwfdp5j9","httpStatusCode":404,"requestId":"39TAB9J9FVYX70SD","totalRetryDelay":0},"Code":"NoSuchKey","HostId":"LAojZYQvS1H1xX+uibvbSK0ElAqayiwDo6xhvIPlD05EyDr8cs7PvI/IHxLr72CcZBW4ieAo2O212QSRqAJUxlQjmwfdp5j9","Key":"indices/bkt_e8407a3d-90fa-450b-b546-c413fdf98cff/latest.index","RequestId":"39TAB9J9FVYX70SD","message":"The specified key does not exist.","name":"NoSuchKey"},"s3BucketLocation":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:43:45.612Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"s3BucketLocation":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:43:45.615Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:43:45.616Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:48:54.385Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:48:54.387Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:48:54.388Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:240:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:56:00.706Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:240:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:56:00.709Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:56:00.715Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"faiss.IndexFlatL2.load is not a function","name":"TypeError","stack":"TypeError: faiss.IndexFlatL2.load is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:240:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T05:58:15.924Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"faiss.IndexFlatL2.load is not a function","name":"TypeError","stack":"TypeError: faiss.IndexFlatL2.load is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:240:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:58:15.927Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T05:58:15.932Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"index.readFromFile is not a function","name":"TypeError","stack":"TypeError: index.readFromFile is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T06:02:57.539Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"index.readFromFile is not a function","name":"TypeError","stack":"TypeError: index.readFromFile is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:02:57.542Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:02:57.545Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T06:07:20.366Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:07:20.369Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:07:20.373Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"faiss.read_index is not a function","name":"TypeError","stack":"TypeError: faiss.read_index is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T06:09:58.105Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"faiss.read_index is not a function","name":"TypeError","stack":"TypeError: faiss.read_index is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:09:58.110Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:09:58.117Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T06:13:32.628Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"index.read is not a function","name":"TypeError","stack":"TypeError: index.read is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:146:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:241:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:13:32.632Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:13:32.635Z"}
{"level":"error","message":"Failed to load index","metadata":{"error":{"message":"faiss.readIndex is not a function","name":"TypeError","stack":"TypeError: faiss.readIndex is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:243:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service","version":"latest"},"timestamp":"2025-06-05T06:19:11.230Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"faiss.readIndex is not a function","name":"TypeError","stack":"TypeError: faiss.readIndex is not a function\n    at FaissService.loadIndex (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:145:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:243:34)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:19:11.232Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:19:11.235Z"}
{"level":"error","message":"Failed to perform vector search","metadata":{"error":{"message":"labels[0].map is not a function","name":"TypeError","stack":"TypeError: labels[0].map is not a function\n    at FaissService.search (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\services\\faissService.js:249:35)\n    at async exports.queryEmbeddings (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\embedController.js:109:21)"},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:22:47.852Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{"isOperational":true,"status":"error","statusCode":500},"modelPath":"bkt_e8407a3d-90fa-450b-b546-c413fdf98cff","service":"chatbot-service"},"timestamp":"2025-06-05T06:22:47.857Z"}
{"level":"error","message":"Error creating order: invalid input syntax for type integer: \"9590.4\"","metadata":{"name":"SequelizeDatabaseError","original":{"code":"22P02","file":"numutils.c","length":149,"line":"620","name":"error","parameters":["add703e7-92e7-4c2f-b7c0-7b85dd71e417","9f765b5d-fbcb-4982-b37b-d943eb3a9f09","7fc33d20-c831-4eb7-af02-aae3d71e4a88","order_QdQJqzGv7QyEWI","created",9590.4,"INR","yearly","{}","2025-06-05 06:56:43.783 +00:00","2025-06-05 06:56:43.783 +00:00"],"routine":"pg_strtoint32_safe","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","where":"unnamed portal parameter $6 = '...'"},"parameters":["add703e7-92e7-4c2f-b7c0-7b85dd71e417","9f765b5d-fbcb-4982-b37b-d943eb3a9f09","7fc33d20-c831-4eb7-af02-aae3d71e4a88","order_QdQJqzGv7QyEWI","created",9590.4,"INR","yearly","{}","2025-06-05 06:56:43.783 +00:00","2025-06-05 06:56:43.783 +00:00"],"parent":{"code":"22P02","file":"numutils.c","length":149,"line":"620","name":"error","parameters":["add703e7-92e7-4c2f-b7c0-7b85dd71e417","9f765b5d-fbcb-4982-b37b-d943eb3a9f09","7fc33d20-c831-4eb7-af02-aae3d71e4a88","order_QdQJqzGv7QyEWI","created",9590.4,"INR","yearly","{}","2025-06-05 06:56:43.783 +00:00","2025-06-05 06:56:43.783 +00:00"],"routine":"pg_strtoint32_safe","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","where":"unnamed portal parameter $6 = '...'"},"service":"chatbot-service","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","stack":"Error\n    at Query.run (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\postgres\\query.js:50:25)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.insert (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Payment.create (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async createOrder (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:54:25)"},"timestamp":"2025-06-05T06:56:43.801Z"}
{"level":"error","message":"Error creating order: invalid input syntax for type integer: \"9590.4\"","metadata":{"name":"SequelizeDatabaseError","original":{"code":"22P02","file":"numutils.c","length":149,"line":"620","name":"error","parameters":["e4766da0-b2a5-4a07-b720-0d2ba52db2ec","dbfb6c03-ff0d-4a25-ad16-5caaa1992ad8","5a7715bf-cdd7-48ce-acad-11218bc8cd44","order_QdQRnUYRzyytSc","created",9590.4,"INR","yearly","{}","2025-06-05 07:04:15.152 +00:00","2025-06-05 07:04:15.152 +00:00"],"routine":"pg_strtoint32_safe","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","where":"unnamed portal parameter $6 = '...'"},"parameters":["e4766da0-b2a5-4a07-b720-0d2ba52db2ec","dbfb6c03-ff0d-4a25-ad16-5caaa1992ad8","5a7715bf-cdd7-48ce-acad-11218bc8cd44","order_QdQRnUYRzyytSc","created",9590.4,"INR","yearly","{}","2025-06-05 07:04:15.152 +00:00","2025-06-05 07:04:15.152 +00:00"],"parent":{"code":"22P02","file":"numutils.c","length":149,"line":"620","name":"error","parameters":["e4766da0-b2a5-4a07-b720-0d2ba52db2ec","dbfb6c03-ff0d-4a25-ad16-5caaa1992ad8","5a7715bf-cdd7-48ce-acad-11218bc8cd44","order_QdQRnUYRzyytSc","created",9590.4,"INR","yearly","{}","2025-06-05 07:04:15.152 +00:00","2025-06-05 07:04:15.152 +00:00"],"routine":"pg_strtoint32_safe","severity":"ERROR","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","where":"unnamed portal parameter $6 = '...'"},"service":"chatbot-service","sql":"INSERT INTO \"Payments\" (\"id\",\"userId\",\"planId\",\"orderId\",\"status\",\"amount\",\"currency\",\"billingCycle\",\"metadata\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"userId\",\"planId\",\"orderId\",\"paymentId\",\"status\",\"amount\",\"currency\",\"paymentMethod\",\"billingCycle\",\"subscriptionStartDate\",\"subscriptionEndDate\",\"failureReason\",\"refundReason\",\"metadata\",\"invoiceUrl\",\"createdAt\",\"updatedAt\";","stack":"Error\n    at Query.run (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\postgres\\query.js:50:25)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.insert (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Payment.create (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async createOrder (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:54:25)"},"timestamp":"2025-06-05T07:04:15.166Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{},"modelPath":"bkt_53d8e36e-585b-4280-abab-72fe43aa943b","service":"chatbot-service"},"timestamp":"2025-06-06T06:07:07.151Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{},"modelPath":"bkt_53d8e36e-585b-4280-abab-72fe43aa943b","service":"chatbot-service"},"timestamp":"2025-06-06T06:09:00.404Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{},"modelPath":"bkt_53d8e36e-585b-4280-abab-72fe43aa943b","service":"chatbot-service"},"timestamp":"2025-06-06T06:12:27.134Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{},"modelPath":"bkt_53d8e36e-585b-4280-abab-72fe43aa943b","service":"chatbot-service"},"timestamp":"2025-06-06T06:15:39.240Z"}
{"level":"error","message":"Error in queryEmbeddings","metadata":{"error":{},"modelPath":"bkt_53d8e36e-585b-4280-abab-72fe43aa943b","service":"chatbot-service"},"timestamp":"2025-06-06T06:16:41.020Z"}
{"level":"error","message":"Uncaught exception: listen EADDRINUSE: address already in use :::3000","metadata":{"address":"::","code":"EADDRINUSE","errno":-4091,"port":3000,"service":"chatbot-service","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1904:16)\n    at listenInCluster (node:net:1961:12)\n    at Server.listen (node:net:2063:7)\n    at Function.listen (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\express\\lib\\application.js:635:24)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\server.js:84:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","syscall":"listen"},"timestamp":"2025-06-06T06:50:13.855Z"}
{"level":"error","message":"Error fetching payment status: invalid input syntax for type uuid: \"pay_QdxUIS945ctPJD\"","metadata":{"name":"SequelizeDatabaseError","original":{"code":"22P02","file":"uuid.c","length":119,"line":"136","name":"error","position":"1093","routine":"string_to_uuid","severity":"ERROR","sql":"SELECT \"Payment\".\"id\", \"Payment\".\"userId\", \"Payment\".\"planId\", \"Payment\".\"orderId\", \"Payment\".\"paymentId\", \"Payment\".\"status\", \"Payment\".\"amount\", \"Payment\".\"currency\", \"Payment\".\"paymentMethod\", \"Payment\".\"billingCycle\", \"Payment\".\"subscriptionStartDate\", \"Payment\".\"subscriptionEndDate\", \"Payment\".\"failureReason\", \"Payment\".\"refundReason\", \"Payment\".\"metadata\", \"Payment\".\"invoiceUrl\", \"Payment\".\"createdAt\", \"Payment\".\"updatedAt\", \"Plan\".\"id\" AS \"Plan.id\", \"Plan\".\"name\" AS \"Plan.name\", \"Plan\".\"description\" AS \"Plan.description\", \"Plan\".\"price\" AS \"Plan.price\", \"Plan\".\"billingCycle\" AS \"Plan.billingCycle\", \"Plan\".\"features\" AS \"Plan.features\", \"Plan\".\"maxDocuments\" AS \"Plan.maxDocuments\", \"Plan\".\"maxStorageGB\" AS \"Plan.maxStorageGB\", \"Plan\".\"maxQueriesPerDay\" AS \"Plan.maxQueriesPerDay\", \"Plan\".\"maxTokensPerQuery\" AS \"Plan.maxTokensPerQuery\", \"Plan\".\"isActive\" AS \"Plan.isActive\", \"Plan\".\"createdAt\" AS \"Plan.createdAt\", \"Plan\".\"updatedAt\" AS \"Plan.updatedAt\" FROM \"Payments\" AS \"Payment\" LEFT OUTER JOIN \"Plans\" AS \"Plan\" ON \"Payment\".\"planId\" = \"Plan\".\"id\" WHERE \"Payment\".\"id\" = 'pay_QdxUIS945ctPJD' AND \"Payment\".\"userId\" = '52c81323-f91f-4a9b-8ad4-d89de4f9fd5e';"},"parameters":{},"parent":{"code":"22P02","file":"uuid.c","length":119,"line":"136","name":"error","position":"1093","routine":"string_to_uuid","severity":"ERROR","sql":"SELECT \"Payment\".\"id\", \"Payment\".\"userId\", \"Payment\".\"planId\", \"Payment\".\"orderId\", \"Payment\".\"paymentId\", \"Payment\".\"status\", \"Payment\".\"amount\", \"Payment\".\"currency\", \"Payment\".\"paymentMethod\", \"Payment\".\"billingCycle\", \"Payment\".\"subscriptionStartDate\", \"Payment\".\"subscriptionEndDate\", \"Payment\".\"failureReason\", \"Payment\".\"refundReason\", \"Payment\".\"metadata\", \"Payment\".\"invoiceUrl\", \"Payment\".\"createdAt\", \"Payment\".\"updatedAt\", \"Plan\".\"id\" AS \"Plan.id\", \"Plan\".\"name\" AS \"Plan.name\", \"Plan\".\"description\" AS \"Plan.description\", \"Plan\".\"price\" AS \"Plan.price\", \"Plan\".\"billingCycle\" AS \"Plan.billingCycle\", \"Plan\".\"features\" AS \"Plan.features\", \"Plan\".\"maxDocuments\" AS \"Plan.maxDocuments\", \"Plan\".\"maxStorageGB\" AS \"Plan.maxStorageGB\", \"Plan\".\"maxQueriesPerDay\" AS \"Plan.maxQueriesPerDay\", \"Plan\".\"maxTokensPerQuery\" AS \"Plan.maxTokensPerQuery\", \"Plan\".\"isActive\" AS \"Plan.isActive\", \"Plan\".\"createdAt\" AS \"Plan.createdAt\", \"Plan\".\"updatedAt\" AS \"Plan.updatedAt\" FROM \"Payments\" AS \"Payment\" LEFT OUTER JOIN \"Plans\" AS \"Plan\" ON \"Payment\".\"planId\" = \"Plan\".\"id\" WHERE \"Payment\".\"id\" = 'pay_QdxUIS945ctPJD' AND \"Payment\".\"userId\" = '52c81323-f91f-4a9b-8ad4-d89de4f9fd5e';"},"service":"chatbot-service","sql":"SELECT \"Payment\".\"id\", \"Payment\".\"userId\", \"Payment\".\"planId\", \"Payment\".\"orderId\", \"Payment\".\"paymentId\", \"Payment\".\"status\", \"Payment\".\"amount\", \"Payment\".\"currency\", \"Payment\".\"paymentMethod\", \"Payment\".\"billingCycle\", \"Payment\".\"subscriptionStartDate\", \"Payment\".\"subscriptionEndDate\", \"Payment\".\"failureReason\", \"Payment\".\"refundReason\", \"Payment\".\"metadata\", \"Payment\".\"invoiceUrl\", \"Payment\".\"createdAt\", \"Payment\".\"updatedAt\", \"Plan\".\"id\" AS \"Plan.id\", \"Plan\".\"name\" AS \"Plan.name\", \"Plan\".\"description\" AS \"Plan.description\", \"Plan\".\"price\" AS \"Plan.price\", \"Plan\".\"billingCycle\" AS \"Plan.billingCycle\", \"Plan\".\"features\" AS \"Plan.features\", \"Plan\".\"maxDocuments\" AS \"Plan.maxDocuments\", \"Plan\".\"maxStorageGB\" AS \"Plan.maxStorageGB\", \"Plan\".\"maxQueriesPerDay\" AS \"Plan.maxQueriesPerDay\", \"Plan\".\"maxTokensPerQuery\" AS \"Plan.maxTokensPerQuery\", \"Plan\".\"isActive\" AS \"Plan.isActive\", \"Plan\".\"createdAt\" AS \"Plan.createdAt\", \"Plan\".\"updatedAt\" AS \"Plan.updatedAt\" FROM \"Payments\" AS \"Payment\" LEFT OUTER JOIN \"Plans\" AS \"Plan\" ON \"Payment\".\"planId\" = \"Plan\".\"id\" WHERE \"Payment\".\"id\" = 'pay_QdxUIS945ctPJD' AND \"Payment\".\"userId\" = '52c81323-f91f-4a9b-8ad4-d89de4f9fd5e';","stack":"Error\n    at Query.run (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\postgres\\query.js:50:25)\n    at C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.select (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Payment.findAll (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Payment.findOne (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\node_modules\\sequelize\\lib\\model.js:1240:12)\n    at async getPaymentStatus (C:\\Users\\muke2\\Desktop\\test\\ChatBotAsService\\controllers\\paymentController.js:190:25)"},"timestamp":"2025-06-06T15:59:03.585Z"}
